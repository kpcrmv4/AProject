---
stepsCompleted: [1, 2, 3, 4, 5, 6]
status: complete
inputDocuments: []
date: 2026-02-05
author: ครูA
---

# Product Brief: EnduroRaceManager

## Executive Summary

**EnduroRaceManager** คือระบบจัดการแข่งขันรถ Enduro แบบครบวงจร ออกแบบมาเพื่อแก้ปัญหาความล่าช้าและความยุ่งยากของการใช้ Google Sheets โดยใช้เทคโนโลยีสมัยใหม่ (Next.js, Tailwind CSS, Supabase, Vercel) เพื่อความเร็วและประสบการณ์ใช้งานที่ดี

ระบบรองรับหลายงานแข่งพร้อมกัน แต่ละงานมี URL เฉพาะ (slug) ครอบคลุมตั้งแต่การรับสมัคร การจับเวลาตามจุด checkpoint แบบ real-time ไปจนถึงการแสดงผลการแข่งขันแบบ live พร้อมระบบ audit trail และการป้องกันการโกง

---

## Core Vision

### Problem Statement

ผู้จัดการแข่งขัน Enduro ในประเทศไทยประสบปัญหาในการจัดการข้อมูลการแข่งขัน:
- **ความช้า**: Google Sheets + Web App ไม่สามารถรองรับการอัพเดทแบบ real-time ได้ดี
- **ความซับซ้อน**: การจัดการหลายรุ่น หลายจุด checkpoint และนักแข่งจำนวนมากเป็นเรื่องยุ่งยาก
- **ความน่าเชื่อถือ**: ขาดระบบตรวจสอบและป้องกันการแก้ไขข้อมูลโดยไม่ได้รับอนุญาต

### Problem Impact

- ผลการแข่งออกช้า นักแข่งต้องรอนาน
- โอกาสเกิดความผิดพลาดในการจดบันทึกเวลาสูง
- ไม่มีระบบ audit trail ทำให้ตรวจสอบย้อนหลังยาก
- ประสบการณ์ของนักแข่งและผู้ชมไม่ดีเท่าที่ควร

### Why Existing Solutions Fall Short

| วิธีปัจจุบัน | ข้อจำกัด |
|-------------|----------|
| Google Sheets | ช้า, ไม่ real-time, ไม่มี audit trail |
| จดมือ/Excel | ผิดพลาดง่าย, รวบรวมข้อมูลยาก, โกงได้ |
| ระบบต่างประเทศ | ไม่รองรับรูปแบบการแข่ง Enduro ไทย, ราคาแพง |

### Proposed Solution

**EnduroRaceManager** - ระบบจัดการแข่งขัน Enduro แบบครบวงจร:

**สำหรับ Admin:**
- สร้างงานแข่งใหม่พร้อม slug เฉพาะ
- กำหนดรุ่นการแข่ง, รูปแบบหมายเลข, วันรับสมัคร
- จัดการจุด checkpoint และออกรหัส 4 หลักให้ Staff (หมดอายุสิ้นวันแข่ง)
- จัดการ DNF/Penalty พร้อมระบุเหตุผล
- แก้ไขเวลาได้ (Admin เท่านั้น เพื่อป้องกันการโกง)
- สร้าง QR Code สำหรับปริ้นติดที่สนาม

**สำหรับ Staff:**
- เข้าถึงหน้าจุด checkpoint ด้วยรหัส 4 หลัก
- บันทึกเวลาด้วยการกดปุ่มเดียว (timestamp อัตโนมัติ)
- UI ปุ่มใหญ่ ใช้งานบนมือถือส่วนตัวได้สะดวก
- ไม่สามารถแก้ไขเวลาที่บันทึกไปแล้ว
- ระบบป้องกันการกดซ้ำ (แจ้งเตือน + block)

**สำหรับนักแข่ง/ผู้ชม:**
- สมัครออนไลน์ เลือกได้หลายรุ่น คำนวณยอดอัตโนมัติ
- แนบสลิปโอนเงิน (QR Code payment)
- ดูผลการแข่งแบบ real-time ตามรุ่น

### Key Differentiators

| จุดเด่น | รายละเอียด |
|---------|------------|
| **ความเร็ว** | Supabase real-time subscriptions อัพเดททันที |
| **ป้องกันการโกง** | Staff บันทึกได้อย่างเดียว, Admin เท่านั้นที่แก้ไขได้ |
| **Audit Trail** | เก็บ log ทุกการกระทำ ใครทำอะไรเมื่อไหร่ |
| **Responsive** | Tailwind CSS รองรับทุกหน้าจอ ปุ่มใหญ่สำหรับ Staff |
| **Multi-event** | รองรับหลายงานแข่งพร้อมกัน แต่ละงานมี URL เฉพาะ |
| **Zero Server** | Vercel + Supabase ไม่ต้องดูแล server |
| **QR Code** | สร้าง QR ปริ้นติดสนามสำหรับผู้ชมดูผล real-time |

### Race Day Flow

| ขั้นตอน | รายละเอียด |
|---------|------------|
| **การออกตัว** | ทีละคน (interval start) |
| **จำนวนรอบ** | รอบเดียว |
| **Checkpoint** | ยืดหยุ่น - ใช้ร่วมกันหรือแยกตามรุ่นก็ได้ |
| **เวลา** | Timestamp จริงที่แต่ละจุด |
| **การจัดอันดับ** | เวลารวมน้อยสุด (Finish - Start) |

### Registration Data Structure

**ข้อมูลนักแข่ง:**
- ชื่อ-นามสกุล (บังคับ)
- ทีมแข่ง (ถ้ามี)
- รถแข่ง (บังคับ)
- เบอร์โทรศัพท์
- รูปนักแข่ง (ไม่บังคับ)

**การสมัคร:**
- เลือกได้หลายรุ่น (multi-select)
- แต่ละรุ่นมีค่าสมัครต่างกัน
- ระบบคำนวณยอดรวมอัตโนมัติ
- รุ่นที่ 1 (OPEN รถรวม) = เบอร์ 1-100
- รุ่นอื่นๆ = เบอร์ 101+
- แนบสลิปโอนเงิน (บังคับ)

### MVP Scope

**Must Have:**

| หมวด | Features |
|------|----------|
| **Event Management** | สร้าง Event + slug + วันที่แข่ง + วันรับสมัคร |
| **Class Management** | กำหนดรุ่น, ค่าสมัคร, รูปแบบเลข, checkpoint แยกตามรุ่น |
| **Registration** | สมัครหลายรุ่น, คำนวณยอด, แนบสลิป, QR payment |
| **Checkpoint System** | รหัส 4 หลัก, timestamp recording, ป้องกันกดซ้ำ |
| **Results** | Real-time display, จัดอันดับตามเวลา |
| **Admin Tools** | DNF/Penalty, แก้ไขเวลา, audit trail |
| **QR Code System** | QR สำหรับผู้ชมดูผล + QR แชร์ลิงก์หน้างานแข่ง |
| **Thermal Print** | พิมพ์บัตรนักแข่ง 80mm (ข้อมูล + รุ่นที่สมัคร + QR) |

**Out of Scope (Phase 2):**

| Feature | เหตุผลที่เลื่อน |
|---------|-----------------|
| Export PDF/Excel | ไม่จำเป็นวันแข่ง ทำทีหลังได้ |
| ประวัตินักแข่งข้ามงาน | ต้องมีข้อมูลหลายงานก่อน |
| สถิติ/กราฟ | Enhancement ไม่ใช่ core |

### Racer Card Print Format (80mm Thermal)

```
┌─────────────────────────────┐
│  [ชื่องานแข่ง]               │
├─────────────────────────────┤
│  เบอร์รถ     [XXX]          │
│  ชื่อ        [ชื่อนักแข่ง]    │
│  ทีม         [ชื่อทีม]       │
│  รถแข่ง      [รุ่นรถ]        │
│  รุ่นแข่งขัน  [1.3.8.18]    │
│  ยอดรวม      [XXXX] บ.     │
├─────────────────────────────┤
│  ที่  รุ่นที่  ชื่อรุ่น        │
│  [รายการรุ่นที่สมัคร]        │
├─────────────────────────────┤
│  ลงชื่อกรรมการ    ลงชื่อนักแข่ง│
│       [QR Code]            │
└─────────────────────────────┘
```

---

## Target Users

### Primary Users

**1. Admin (ผู้จัดงานแข่ง)**
- ผู้จัดงานแข่ง Enduro อาชีพ
- จัดงานเดือนละครั้ง
- ต้องการระบบที่เร็ว เชื่อถือได้ จัดการง่าย
- ใช้งานจากทุกที่ (บ้าน, สนามแข่ง, ระหว่างทาง)

**2. Staff (เจ้าหน้าที่ประจำจุด Checkpoint)**
- ใช้มือถือส่วนตัว
- ต้องการ UI ง่าย ปุ่มใหญ่ กดครั้งเดียวจบ
- เข้าถึงด้วยรหัส 4 หลัก ไม่ต้อง login
- อาจไม่ถนัดเทคโนโลยี ต้องใช้งานได้ทันที

### Secondary Users

**3. Racer (นักแข่ง)**
- สมัครออนไลน์ เลือกหลายรุ่น แนบสลิป
- ดูผลการแข่งแบบ real-time ระหว่างและหลังแข่ง
- ต้องการความโปร่งใส เชื่อถือได้ในผลการแข่ง

**4. Viewer (ผู้ชม)**
- ครอบครัว เพื่อน แฟนคลับของนักแข่ง
- ดูผลการแข่งผ่าน QR Code ที่สนาม หรือลิงก์ที่แชร์
- ไม่ต้อง login ดูได้เลย

---

## Success Metrics

### Definition of Success

**ระบบสำเร็จ = ใช้งานได้จริงในการแข่งขัน**

### User Success Metrics

| ผู้ใช้ | ความสำเร็จ |
|--------|------------|
| **Admin** | สร้างงานแข่งและจัดการได้ครบวงจรโดยไม่ต้องใช้ Google Sheets |
| **Staff** | กดบันทึกเวลาได้ทันทีโดยไม่ต้องเรียนรู้นาน |
| **Racer** | สมัครและดูผลได้แบบ real-time |
| **Viewer** | สแกน QR แล้วเห็นผลทันที |

### Technical Success Metrics

| Metric | Target |
|--------|--------|
| **Real-time update** | < 2 วินาที |
| **System uptime** | 99% (ไม่ล่มวันแข่ง) |
| **Mobile responsive** | ใช้งานได้ทุกขนาดหน้าจอ |

### Quality Principles

ออกแบบตาม best practices:
- **Performance**: Optimized queries, efficient real-time subscriptions
- **Security**: RLS, input validation, audit trail
- **UX**: Large touch targets, clear feedback, minimal steps
- **Maintainability**: Clean code, proper typing, modular structure

